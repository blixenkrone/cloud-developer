version: "3.7"

services:
  user-api:
    build:
      context: ./api/feed-service
      dockerfile: Dockerfile
    ports:
      - 8080:8080
    env_file: .env

  feed-api:
    build:
      context: ./api/users-service
      dockerfile: Dockerfile
    ports:
      - 8080:8080
    env_file: .env

  frontend:
    build:
      context: ./udagram-frontend
      dockerfile: Dockerfile
    ports:
      - 8081:8081

  proxy:
    image: nginx:latest
# #for testing postgres locally because AWS didn't give me their free-tier access to their RDB service.
#   postgres:
#     image: postgres:latest
#     restart: always
#     environment:
#       POSTGRES_PASSWORD: example
#       POSTGRES_USER: postgres
#       POSTGRES_DB: postgres
#     ports:
#       - 5432:5432
